<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anketa</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  background: radial-gradient(circle at top, #f9fafb, #eef1f6);
  min-height: 100vh;
  overflow: hidden;
  color: #1f2937;
}

.butterfly {
  position: fixed;
  width: 60px;
  opacity: 0.25;
  pointer-events: none;
  animation: drift linear infinite;
}

@keyframes drift {
  from { transform: translate(0,0); }
  to { transform: translate(var(--dx), var(--dy)); }
}

.wrapper {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.card {
  width: 100%;
  max-width: 440px;
  padding: 28px 26px;
  border-radius: 22px;
  background: rgba(255,255,255,0.82);
  backdrop-filter: blur(14px);
  box-shadow: 0 30px 60px rgba(0,0,0,0.18);
  text-align: center;
  z-index: 10;
}

.step {
  display: none;
  opacity: 0;
  transform: translateY(24px);
}

.step.active {
  display: block;
  animation: stepIn 0.5s cubic-bezier(.2,.8,.2,1) forwards;
}

@keyframes stepIn {
  to { opacity: 1; transform: translateY(0); }
}

h2 { font-size: 22px; margin-bottom: 18px; }
h3 { font-size: 18px; margin-bottom: 14px; }

button {
  width: 100%;
  padding: 14px 16px;
  margin: 8px 0;
  border-radius: 14px;
  border: none;
  font-size: 16px;
  cursor: pointer;
}

.primary {
  background: linear-gradient(135deg, #2563eb, #3b82f6);
  color: #fff;
}

.secondary {
  background: #f1f5f9;
  color: #1f2937;
}

select {
  width: 100%;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid #d1d5db;
  font-size: 16px;
}

.section {
  margin-top: 10px;
  padding: 12px;
  border-radius: 14px;
  background: rgba(255,255,255,0.95);
  text-align: left;
}

textarea {
  width: 100%;
  margin-top: 14px;
  padding: 14px;
  border-radius: 14px;
  border: 1px solid #d1d5db;
  font-size: 15px;
  resize: none;
}

.fake-captcha {
  margin-top: 22px;
  padding: 16px;
  border-radius: 16px;
  background: #f8fafc;
  border: 1px solid #e5e7eb;
  display: flex;
  align-items: center;
  gap: 12px;
}
</style>
</head>

<body>

<div class="wrapper">
<div class="card">

<div id="step0" class="step active">
  <h2>Potvrda pristupa</h2>
  <div class="fake-captcha">
    <input type="checkbox" id="fakeCaptcha" onchange="fakeCaptchaCheck()">
    <span>Nisam robot ü§ñ</span>
  </div>
</div>

<div id="step1" class="step">
  <h2>Da li raspolo≈æena da izaƒëe≈° sa mnom ove nedelje na piƒáe ili veƒçeru?‚ò∫Ô∏è</h2>
  <button class="primary" onclick="answer('Da')">Da</button>
  <button class="secondary" onclick="answer('Ne')">Ne</button>
</div>

<div id="step2" class="step">
  <h3>Koji dan ti najvi≈°e odgovara?</h3>
  <select id="day">
    <option>Ponedeljak</option>
    <option>Utorak</option>
    <option>Sreda</option>
    <option>ƒåetvrtak</option>
    <option>Petak</option>
    <option>Subota</option>
    <option>Nedelja</option>
  </select>
  <button class="primary" onclick="nextStep()">Dalje</button>
</div>

<div id="step3" class="step">
  <h3>Izaberi vrstu mesta</h3>

  <button class="secondary" onclick="toggleCategory('kafic')">‚òï Kafiƒái</button>
  <div id="kafic" class="section" style="display:none"></div>

  <button class="secondary" onclick="toggleCategory('restoran')">üçΩ Restorani</button>
  <div id="restoran" class="section" style="display:none"></div>

  <button class="secondary" onclick="toggleCategory('picerija')">üçï Picerije</button>
  <div id="picerija" class="section" style="display:none"></div>

  <textarea id="predlog" placeholder="Ti mo≈æe≈° predlo≈æiti ne≈°to drugo..." rows="3"
    oninput="document.getElementById('finishBtn').style.display='block'"></textarea>

  <button id="finishBtn" class="primary" onclick="finish()" style="display:none">
    Zavr≈°i
  </button>
</div>

</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
emailjs.init("9l5rh_uOr9onl3Z-Y");

let result = {};
let selectedPlace = "";
let butterfliesCreated = false;

function createButterflies() {
  if (butterfliesCreated) return;
  butterfliesCreated = true;
  for (let i = 0; i < 90; i++) {
    const img = document.createElement("img");
    img.src = "leptir.png";
    img.className = "butterfly";
    img.style.top = Math.random()*100+"%";
    img.style.left = Math.random()*100+"%";
    img.style.setProperty("--dx",(Math.random()*200-100)+"vw");
    img.style.setProperty("--dy",(Math.random()*200-100)+"vh");
    img.style.animationDuration = 80+Math.random()*40+"s";
    document.body.appendChild(img);
  }
}

function switchStep(a,b){
  document.getElementById(a).classList.remove("active");
  document.getElementById(b).classList.add("active");
}

function fakeCaptchaCheck(){
  if(fakeCaptcha.checked){
    createButterflies();
    switchStep("step0","step1");
  }
}

function answer(v){
  result.odgovor=v;
  v==="Da"?switchStep("step1","step2"):sendResult();
}

function nextStep(){
  result.dan=day.value;
  switchStep("step2","step3");
}

const locations={
  kafic:[
    ["Kafeterija Fontana","https://maps.app.goo.gl/FSLNB2UZPP8n2JGt5"],
    ["Voulez-vous","https://maps.app.goo.gl/Zs6TKub1mgeKqEhm6"]
  ],
  restoran:[
    ["Durmitor","https://maps.app.goo.gl/TypmyoXyiCQU7Wtv6"],
    ["Milky","https://maps.app.goo.gl/8u4hUeLdapRCSxT19"],
    ["Mamagayo","https://maps.app.goo.gl/cjnhWabUYBGbvtDV9"]
  ],
  picerija:[
    ["Pizza Bar","https://maps.app.goo.gl/RuUrapsaFnpSRRSS8"],
    ["Majstor i Margarita","https://maps.app.goo.gl/L39RkHQiEpSXjuoU8"],
    ["Napoli","https://maps.app.goo.gl/Q1P4wWc4nYXT6t987"]
  ]
};

function toggleCategory(type){
  const box=document.getElementById(type);
  if(box.style.display==="block"){
    box.style.display="none";
    return;
  }
  box.innerHTML="";
  locations[type].forEach(p=>{
    box.innerHTML+=`
      <div>
        <input type="radio" name="place" onchange="selectedPlace='${p[0]}';finishBtn.style.display='block'">
        ${p[0]} <a href="${p[1]}" target="_blank">mapa</a>
      </div>`;
  });
  box.style.display="block";
}

function finish(){
  result.mesto=selectedPlace||"-";
  result.predlog=predlog.value||"-";
  sendResult();
}

function sendResult(){
  emailjs.send("service_wla37zd","template_gjqzphl",result)
  .then(()=>{
    document.querySelector(".card").innerHTML=
    "<h2>Hvala ti na izdvojenom vremenu</h2><p>Radujem se na≈°em viƒëenju, hajde da priƒçamo üòâ</p>";
  });
}
</script>

</body>
</html>
